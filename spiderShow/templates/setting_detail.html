{% extends "bootstrap/base.html" %}
{% block scripts %}
    {{ super() }}
    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="http://cdn.datatables.net/1.10.7/css/jquery.dataTables.css">
    <!-- DataTables -->
    <script type="text/javascript" charset="utf8"
            src="http://cdn.datatables.net/1.10.7/js/jquery.dataTables.js"></script>

{% endblock %}
{% block content %}
    <h3 align="center">设定抓取信息
        <small>主页、域名、详情页/列表页URL的特征词/正则表达式</small>
    </h3>
    <hr/>
    <div id="message" class="alert alert-warning form-group center" style="width:80%; margin-left:10px">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <ul class=flashes>
                    {% for message in messages %}
                        <label>{{ message }}</label>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}
    </div>

    <form id="setting" method="POST" action="/save_and_run">
        <hr/>
        <div id="config" class="form-group center" style="width:80%; margin-left:50px">
            {{ inputForm.start_url.label }}&nbsp;{{ inputForm.start_url(size=30) }}&nbsp;
            {{ inputForm.site_domain.label }}&nbsp;{{ inputForm.site_domain(size=20) }}&nbsp;
            {{ inputForm.black_domain_str.label }}&nbsp;{{ inputForm.black_domain_str(size=20) }}&nbsp;请按照域名 + ‘;’
            形式增加。<br>
        </div>
        <hr/>
        <div id="convert-ajax" class="form-group" style="width:80%; margin-left:50px">
            <label>[例] http://cpt.xtu.edu.cn/a/gonggao/2013/1125/225.html >>>
                /[a-zA-Z]{1}/[a-zA-Z]{7}/\d{4}/\d{4}/\d{3}.html </label><br>
            <input type=text size=70 id="convert_url">&nbsp;<input type="button" id="convert" value="转换为正则">&nbsp;
            <label id="regex_result"> 请确认转换后的表达式， 编辑（拷贝） 到下面列表中。 </label>
        </div>
        <hr/>
        <div id="list-regex" class="form-group" style="width:80%; margin-left:50px">
            <label for="name">列表页-正则表达式(最多50条)</label>
            <table id="list-regex-tab" class="table table-striped table-hover">
                <thead>
                <tr>
                    <th>选择</th>
                    <th>正则表达式</th>
                    <th>权重</th>
{#                    <th>匹配数</th>#}
                </tr>
                </thead>
                <tbody>å
                {% for row in inputForm.list_regex_list %}
                    <tr id={{ loop.index }}>
                        <td>{{ row.select() }}</td>
                        <td>{{ row.regex(size=100) }}</td>
                        <td>{{ row.weight() }}</td>
{#                        <td>{{ row.score(size=6) }}</td>#}
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <hr/>
        <div id="detail-regex" class="form-group" style="width:80%; margin-left:50px">
            <label for="name">详情页-正则表达式(最多50条)</label><br>
            <table id="detail-regex-tab" class="table table-striped table-hover">
                <thead>
                <tr>
                    <th>选择</th>
                    <th>正则表达式</th>
                    <th>权重</th>
{#                    <th>匹配数</th>#}
                </tr>
                </thead>
                <tbody>
                {% for row in inputForm.detail_regex_list %}
                    <tr id="{{ loop.index }}">
                        <td>&nbsp;&nbsp;{{ row.select() }}</td>
                        <td>{{ row.regex(size=100) }}</td>
                        <td>{{ row.weight() }}</td>
{#                        <td readonly="readonly">{{ row.score(size=6) }}</td>#}
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <hr/>
        <div id="submit" class="form-group" style="width:80%; margin-left:50px">
            <button type="button" class="btn">{{ inputForm.save_run() }}</button>
{#            <button type="button" class="btn disabled">{{ inputForm.pre_run() }}</button>#}
        </div>
    </form>

{% endblock %}