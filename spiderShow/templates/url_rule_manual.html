<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>首页</title>
        <title>bugs status change</title>
        <script src="{{url_for('static', filename='jquery.min.js')}}"></script>
        <script src="{{url_for('static', filename='highcharts.js')}}"></script>
        <script src="{{url_for('static', filename='exporting.js')}}"></script>
        <link href="{{url_for('static', filename='bootstrap/css/bootstrap.min.css')}}" rel="stylesheet">
        <script src="{{url_for('static', filename='bootstrap/js/bootstrap.min.js')}}"></script>
        <script type="text/javascript">
        setTimeout('window.location.reload()',5*1000);
        $(function () {
            $('#container').highcharts({
                title: {
                    text: '处理过程',
                    x: -20 //center
                },
                subtitle: {
                    text: '单位:分钟',
                    x: -20
                },
                xAxis: {
                    categories: {{ times }}
                },
                yAxis: {
                    title: {
                        text: '页数'
                    },
                    plotLines: [{
                        value: 0,
                        width: 1,
                        color: '#808080'
                    }]
                },
                tooltip: {
                    valueSuffix: '页'
                },
                legend: {
                    layout: 'vertical',
                    align: 'right',
                    verticalAlign: 'middle',
                    borderWidth: 1
                },
                series: [{
                    name: '规则0',
                    data: {{ rule0_cnt }}
                }, {
                    name: '规则1',
                    data: {{ rule1_cnt }}
                }, {
                    name: '详情页',
                    data: {{ detail_cnt }}
                }, {
                    name: '列表页',
                    data: {{ list_cnt }}
                },{
                    name: '列表页(扫描完成)',
                    data:{{ list_done_cnt }}
                }]
            });
        });
    </script>
    </head>
    <body>
        {% if regex %}
            <h1>正则表达式：{{ regex }}!</h1>
        {% else %}
            <h1>请输入配置信息和正则表达式</h1>
        {% endif %}

        <form id="setting" method="POST">
            <table>
                <div id="domain" style="height: 50%; width:50%; margin-inside:10px">
                    <tr><td style="width:10%; margin-left:10px">{{ myForm.site_domain.label }} </td> <td style="width:40%; margin-left:10px">{{ myForm.site_domain() }}<td></tr>
                    <tr><td style="width:10%; margin-left:10px">{{ myForm.start_urls.label  }} </td> <td style="width:40%; margin-left:10px">{{ myForm.start_urls() }}<td></tr>
                </div>
                <div id="regex" style="height: 50%; width:50%; margin-left:10px">
                    <tr><td style="width:10%; margin-left:10px">{{ myForm.regex1.label }}</td> <td style="width:40%; margin-left:10px">{{ myForm.regex1() }}<td></tr>
                    <tr><td style="width:10%; margin-left:10px">{{ myForm.regex2.label }}</td> <td style="width:40%; margin-left:10px">{{ myForm.regex2() }}</td></tr>
                    <tr><td style="width:10%; margin-left:10px">{{ myForm.regex3.label }}</td> <td style="width:40%; margin-left:10px">{{ myForm.regex3() }}</td></tr>
                </div>
            </table>
            {{ myForm.submit() }}
        </form>

        <div id="process" style="height:800px;width:900px;float:left;">
            <div id="container" style="min-width:700px;height:700px"></div>
        </div>

    </body>
</html>