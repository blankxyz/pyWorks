<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css"/>
    <style type="text/css">
        html, body, .map {
            width: 100%;
            height: 100%;
            margin: 0px;
        }
    </style>
    <script type="text/javascript" src="http://cache.amap.com/lbs/static/addToolbar.js"></script>
    <title>微信采集范围</title>
</head>
<body onload>
<div id="container" class="map" tabindex="0"></div>
<div id="myPageTop">
    <table>
        <tr>
            <td>
                <label>按关键字搜索：</label>
            </td>
            <td class="column2">
                <label>左击获取经纬度：</label>
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" placeholder="关键字搜索" id="tipinput">
            </td>
            <td class="column2">
                <input type="text" readonly="true" id="lnglat">
            </td>
        </tr>
    </table>
</div>
<script type="text/javascript" src='http://cache.amap.com/lbs/static/allCity.js'></script>
{#<script type="text/javascript" src='http://127.0.0.1:5000/timeLocation.js'></script>#}
<script type="text/javascript" src='http://webapi.amap.com/maps?v=1.3&key=0c7fb71b2e13546416337666cd406db3&plugin=AMap.Autocomplete'></script>
<script type="text/javascript">
    var map = new AMap.Map('container', {
        layers: [new AMap.TileLayer({
            textIndex: 2
        })],
        zoom: 4,
        center: [102.342785, 35.312316],
        resizeEnable: true
    });

    //为地图注册click事件获取鼠标点击出的经纬度坐标
    var clickEventListener = map.on('click', function (e) {
        // 获取经纬度坐标
        document.getElementById("lnglat").value = e.lnglat.getLng() + ',' + e.lnglat.getLat()
    });
    var auto = new AMap.Autocomplete({
        input: "tipinput"
    });
    AMap.event.addListener(auto, "select", select);//注册监听，当选中某条记录时会触发
    function select(e) {
        if (e.poi && e.poi.location) {
            map.setZoom(15);
            map.setCenter(e.poi.location);
        }
    }

    var circle = new AMap.Circle({
        center: new AMap.LngLat("116.397035", "39.919213"),// 圆心位置
        radius: 10, //半径 200km
        strokeColor: "#F33", //线颜色
        strokeOpacity: 9, //线透明度
        strokeWeight: 1, //线粗细度
        fillColor: "#ee2200", //填充颜色
        fillOpacity: 0.10//填充透明度
    });
    circle.setMap(map);

    var mass = new AMap.MassMarks(citys, {
        url: 'http://webapi.amap.com/theme/v1.3/markers/n/mark_r.png',
        anchor: new AMap.Pixel(3, 7),
        size: new AMap.Size(5, 7),
        opacity: 0.7,
        cursor: 'pointer',
        zIndex: 1
    });
    var marker = new AMap.Marker({
        content: ' ',
        map: map
    });
    mass.on('mouseover', function (e) {
        marker.setPosition(e.data.lnglat);
        marker.setLabel({content: e.data.name})
    });
    mass.setMap(map);
</script>

</body>

</html>
