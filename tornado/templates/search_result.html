{#{% extends "main.html" %}#}
<html>
<head>
    <meta charset="utf-8">
    {#    <meta http-equiv="X-UA-Compatible" content="IE=edge">#}
    {#    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">#}
    <title>微信数据展示</title>
    <link rel="stylesheet" href="{{ static_url("css/style.css") }}"/>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="http://cdn.bootcss.com/jquery/1.8.3/jquery.min.js"></script>
    <!-- bootstrap -->
    <link href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="http://cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <!-- DataTables -->
    <link rel="stylesheet" href="http://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css"/>
    <script src="http://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
</head>

{% autoescape None %}

{% block body %}
<h2>检索结果</h2>
<form name="search" action="/search" method="post">
    <input type="text" name="authors"/>
    <input type="text" name="ago_time"/>
    <input type="submit" value="Submit"/>
</form>
{#<div id="sns">#}
{#	{% for sns in sns_info_list %}#}
{# 	 	{{ modules.SnsInfo(sns) }}#}
{#	{% end %}#}
{#</div>#}
<style>
    .sns {
        width: 1280px;
        min-height: 110px;
        border: 1px solid #555;
        padding: 0 15px 0 15px;
        margin: 1px;
        background-color: #F5F5F5;
    }

    .sns img.sns_image {
        max-width: 100px;
        max-height: 100px;
        margin: 5px 15px 5px 0;
        float: left;
    }

    .sns .sns_details {
        margin: 5px 10px 5px 0;
    }

    .sns .sns_title {
        color: #777;
    }
</style>
<div id="left_unkown_urls_div" style="float:left;width:71%; margin-left:20px">
    <table id="sns_info_tab">
        <thead>
        <tr>
            <th>列表URL {{ len(sns_info_list) }}</th>
        </tr>
        </thead>
        <tbody>
        {% for sns_info in sns_info_list %}
        <tr>
            <td>
                <div class="sns">
                    {% set pre_url = "http://read.html5.qq.com/image?src=forum&q=5&r=0&imgflag=7&imageUrl=" %}
                    {% for url in sns_info["mediaList"] %}
                    {#    {{ sns_info["mediaList"][0] }}#}
                    <img src="{{ pre_url + url }}" class="sns_image"/>
                    {% end %}
                    <div class="sns_details">
                        <div class="sns_date_added">
                            <label><span class="glyphicon glyphicon-user"></span>&nbsp; {{ sns_info["authorName"] }}&nbsp;&nbsp;&nbsp;
                                <label><span
                                        class="glyphicon glyphicon-time"></span>&nbsp; {{ datetime.datetime.utcfromtimestamp(sns_info["timestamp"]).strftime("%Y-%m-%d %H:%M:%S") }}&nbsp;&nbsp;&nbsp;
                                    <label><span
                                            class="glyphicon glyphicon-screenshot"></span>&nbsp; {{ sns_info["poi_address"] }}
                        </div>
                        <div class="sns_body">{% raw sns_info["content"] %}</div>
                    </div>
                </div>
            </td>
        </tr>
        {% end %}
        </tbody>
    </table>
</div>
{#<div id="container_2"></div>#}
{% end %}
<script src="{{ static_url("js/script.js") }}"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#sns_info_tab').DataTable({
            "oLanguage": {
                "sLengthMenu": "每页 _MENU_ 条",
                "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条",
                "sInfoEmpty": "共 0 条",
                "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "前页",
                    "sNext": "后页",
                    "sLast": "尾页"
                },
                "sZeroRecords": "没有数据 。。。",
                "sProcessing": "<img src='/static/images/loading.gif'/>",
                "sSearch": "检索："
            },
            "oSearch": {"sSearch": "", "bRegex": true, "bSmart": true},
            "info": true,
            "searching": true,
            "processing": true,
            "search": {"regex": true},//开启正则支持
            {#"bStateSave": true, //状态保存,与正则检索矛盾#}
            "bFilter": true,
            "bLengthChange": true,
            "aLengthMenu": [5, 15, 30],
            "scrollY": "800px",
            "bScrollCollapse": true,
            "aaSorting": [[0, "desc"]]
        });
    });
</script>


